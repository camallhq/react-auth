{"version":3,"file":"index.cjs.js","sources":["../../src/react/AuthContext.tsx","../../src/auth/storage.ts","../../src/auth/pkce.ts","../../src/auth/oidc.ts","../../src/auth/refreshLock.ts","../../src/react/AuthProvider.tsx","../../src/react/useAuth.ts","../../src/react/RequireAuth.tsx","../../src/react/authFetch.ts"],"sourcesContent":["// src/react/AuthContext.tsx\r\nimport { createContext } from \"react\";\r\nimport type { AuthConfig, AuthState } from \"../types\";\r\n\r\nexport type AuthApi = AuthState & {\r\n  config: AuthConfig;\r\n  login: (opts?: { redirectTo?: string }) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n  getAccessToken: () => Promise<string | undefined>;\r\n};\r\n\r\nexport const AuthContext = createContext<AuthApi | undefined>(undefined);\r\n","// src/auth/storage.ts\r\nimport type { AuthStorage, TokenSet } from \"../types\";\r\n\r\ntype StorageLike = Pick<Storage, \"getItem\" | \"setItem\" | \"removeItem\">;\r\n\r\nexport function resolveStorage(kind: AuthStorage): StorageLike {\r\n  if (kind === \"local\") return window.localStorage;\r\n  if (kind === \"session\") return window.sessionStorage;\r\n\r\n  // memory fallback\r\n  const mem: Record<string, string> = {};\r\n  return {\r\n    getItem: (k) => (k in mem ? mem[k] ?? null : null),\r\n    setItem: (k, v) => void (mem[k] = v),\r\n    removeItem: (k) => void delete mem[k],\r\n  };\r\n}\r\n\r\nexport const Keys = {\r\n  pkceVerifier: \"ra_pkce_verifier\",\r\n  state: \"ra_state\",\r\n  nonce: \"ra_nonce\",\r\n  tokens: \"ra_tokens\",\r\n  user: \"ra_user\",\r\n  appRedirect: \"ra_app_redirect\",\r\n};\r\n\r\nexport function saveTokens(s: StorageLike, tokens: TokenSet) {\r\n  s.setItem(Keys.tokens, JSON.stringify(tokens));\r\n}\r\nexport function loadTokens(s: StorageLike): TokenSet | undefined {\r\n  const raw = s.getItem(Keys.tokens);\r\n  if (!raw) return undefined;\r\n  try { return JSON.parse(raw) as TokenSet; } catch { return undefined; }\r\n}\r\nexport function clearAuth(s: StorageLike) {\r\n  s.removeItem(Keys.tokens);\r\n  s.removeItem(Keys.user);\r\n  s.removeItem(Keys.pkceVerifier);\r\n  s.removeItem(Keys.state);\r\n  s.removeItem(Keys.nonce);\r\n  s.removeItem(Keys.appRedirect);\r\n}\r\n","// src/auth/pkce.ts\r\nconst encoder = new TextEncoder();\r\n\r\nfunction base64UrlEncode(bytes: Uint8Array) {\r\n  let str = \"\";\r\n  bytes.forEach((b) => (str += String.fromCharCode(b)));\r\n  const b64 = btoa(str);\r\n  return b64.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/g, \"\");\r\n}\r\n\r\nexport function randomString(bytes = 32) {\r\n  const arr = new Uint8Array(bytes);\r\n  crypto.getRandomValues(arr);\r\n  return base64UrlEncode(arr);\r\n}\r\n\r\nexport async function sha256Base64Url(input: string) {\r\n  const digest = await crypto.subtle.digest(\"SHA-256\", encoder.encode(input));\r\n  return base64UrlEncode(new Uint8Array(digest));\r\n}\r\n","// src/auth/oidc.ts\r\nimport type { AuthConfig, TokenSet } from \"../types\";\r\nimport { randomString, sha256Base64Url } from \"./pkce\";\r\n\r\nexport function endpoints(cfg: AuthConfig) {\r\n  const base = cfg.issuer.replace(/\\/+$/, \"\");\r\n  return {\r\n    authorize: cfg.authorizeEndpoint ?? `${base}/oidc/authorize`,\r\n    token: cfg.tokenEndpoint ?? `${base}/oidc/token`,\r\n    userInfo: cfg.userInfoEndpoint ?? `${base}/oidc/userinfo`,\r\n    endSession: cfg.endSessionEndpoint,\r\n  };\r\n}\r\n\r\nexport async function buildAuthorizeUrl(cfg: AuthConfig, opts?: { appState?: string }) {\r\n  const { authorize } = endpoints(cfg);\r\n\r\n  const verifier = randomString(32);\r\n  const challenge = await sha256Base64Url(verifier);\r\n  const state = randomString(16);\r\n  const nonce = randomString(16);\r\n\r\n  const scopes = (cfg.scopes?.length ? cfg.scopes : [\"openid\", \"profile\", \"email\"]).join(\" \");\r\n\r\n  const url = new URL(authorize);\r\n  url.searchParams.set(\"response_type\", \"code\");\r\n  url.searchParams.set(\"client_id\", cfg.clientId);\r\n  url.searchParams.set(\"redirect_uri\", cfg.redirectUri);\r\n  url.searchParams.set(\"scope\", scopes);\r\n\r\n  url.searchParams.set(\"code_challenge\", challenge);\r\n  url.searchParams.set(\"code_challenge_method\", \"S256\");\r\n  url.searchParams.set(\"state\", state);\r\n  url.searchParams.set(\"nonce\", nonce);\r\n\r\n  if (cfg.audience) url.searchParams.set(\"audience\", cfg.audience);\r\n  if (opts?.appState) url.searchParams.set(\"app_state\", opts.appState);\r\n\r\n  if (cfg.extraAuthorizeParams) {\r\n    for (const [k, v] of Object.entries(cfg.extraAuthorizeParams)) url.searchParams.set(k, v);\r\n  }\r\n\r\n  return { url: url.toString(), verifier, state, nonce };\r\n}\r\n\r\nexport async function exchangeCodeForTokens(cfg: AuthConfig, code: string, verifier: string): Promise<TokenSet> {\r\n  const { token } = endpoints(cfg);\r\n\r\n  const body = new URLSearchParams();\r\n  body.set(\"grant_type\", \"authorization_code\");\r\n  body.set(\"client_id\", cfg.clientId);\r\n  body.set(\"redirect_uri\", cfg.redirectUri);\r\n  body.set(\"code\", code);\r\n  body.set(\"code_verifier\", verifier);\r\n\r\n  const res = await fetch(token, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n    body,\r\n  });\r\n\r\n  if (!res.ok) throw new Error(`Token exchange failed (${res.status})`);\r\n  const json = await res.json() as any;\r\n\r\n  const now = Math.floor(Date.now() / 1000);\r\n  const expiresIn = Number(json.expires_in ?? 3600);\r\n\r\n  return {\r\n    accessToken: json.access_token,\r\n    idToken: json.id_token,\r\n    refreshToken: json.refresh_token,\r\n    tokenType: json.token_type,\r\n    scope: json.scope,\r\n    expiresAt: now + expiresIn,\r\n  };\r\n}\r\n\r\nexport async function fetchUserInfo(cfg: AuthConfig, accessToken: string) {\r\n  const { userInfo } = endpoints(cfg);\r\n  const res = await fetch(userInfo, {\r\n    headers: { Authorization: `Bearer ${accessToken}` },\r\n  });\r\n  if (!res.ok) throw new Error(`UserInfo failed (${res.status})`);\r\n  return (await res.json()) as Record<string, any>;\r\n}\r\n\r\nexport async function refreshTokens(cfg: AuthConfig, refreshToken: string): Promise<TokenSet> {\r\n  const { token } = endpoints(cfg);\r\n\r\n  const body = new URLSearchParams();\r\n  body.set(\"grant_type\", \"refresh_token\");\r\n  body.set(\"client_id\", cfg.clientId);\r\n  body.set(\"refresh_token\", refreshToken);\r\n\r\n  const res = await fetch(token, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n    body,\r\n  });\r\n\r\n  if (!res.ok) throw new Error(`Refresh failed (${res.status})`);\r\n  const json = (await res.json()) as any;\r\n\r\n  const now = Math.floor(Date.now() / 1000);\r\n  const expiresIn = Number(json.expires_in ?? 3600);\r\n\r\n  // Rotation: some IDPs return a new refresh_token, some don't.\r\n  return {\r\n    accessToken: json.access_token,\r\n    idToken: json.id_token,\r\n    refreshToken: json.refresh_token ?? refreshToken,\r\n    tokenType: json.token_type,\r\n    scope: json.scope,\r\n    expiresAt: now + expiresIn,\r\n  };\r\n}","// src/auth/refreshLock.ts\r\ntype StorageLike = Pick<Storage, \"getItem\" | \"setItem\" | \"removeItem\">;\r\n\r\nexport function tryAcquireLock(storage: StorageLike, key: string, ttlMs: number): boolean {\r\n  const now = Date.now();\r\n  const raw = storage.getItem(key);\r\n  if (raw) {\r\n    const lockUntil = Number(raw);\r\n    if (!Number.isNaN(lockUntil) && lockUntil > now) return false;\r\n  }\r\n  storage.setItem(key, String(now + ttlMs));\r\n  return true;\r\n}\r\n\r\nexport function releaseLock(storage: StorageLike, key: string) {\r\n  storage.removeItem(key);\r\n}\r\n\r\nexport async function waitForUnlock(storage: StorageLike, key: string, timeoutMs = 5000) {\r\n  const start = Date.now();\r\n  while (Date.now() - start < timeoutMs) {\r\n    const raw = storage.getItem(key);\r\n    if (!raw) return;\r\n    const until = Number(raw);\r\n    if (Number.isNaN(until) || until <= Date.now()) {\r\n      storage.removeItem(key);\r\n      return;\r\n    }\r\n    await new Promise((r) => setTimeout(r, 150));\r\n  }\r\n}\r\n","// src/react/AuthProvider.tsx\r\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport type { AuthConfig, AuthState, TokenSet } from \"../types\";\r\nimport { AuthContext } from \"./AuthContext\";\r\nimport { resolveStorage, Keys, loadTokens, saveTokens, clearAuth } from \"../auth/storage\";\r\nimport { buildAuthorizeUrl, exchangeCodeForTokens, fetchUserInfo } from \"../auth/oidc\";\r\nimport { refreshTokens } from \"../auth/oidc\";\r\nimport { tryAcquireLock, releaseLock, waitForUnlock } from \"../auth/refreshLock\";\r\n\r\nfunction isExpired(tokens: TokenSet, skewSeconds: number) {\r\n  const now = Math.floor(Date.now() / 1000);\r\n  return tokens.expiresAt - skewSeconds <= now;\r\n}\r\n\r\nexport function AuthProvider(props: { config: AuthConfig; children: React.ReactNode }) {\r\n  const cfg = props.config;\r\n  const storage = useMemo(() => resolveStorage(cfg.storage ?? \"session\"), [cfg.storage]);\r\n\r\n  const [state, setState] = useState<AuthState>({\r\n    isLoading: true,\r\n    isAuthenticated: false,\r\n  });\r\n\r\n  const finalizeFromCallback = useCallback(async () => {\r\n    const url = new URL(window.location.href);\r\n    const code = url.searchParams.get(\"code\");\r\n    const returnedState = url.searchParams.get(\"state\");\r\n\r\n    // Not a callback\r\n    if (!code || !returnedState) return false;\r\n\r\n    const expectedState = storage.getItem(Keys.state);\r\n    const verifier = storage.getItem(Keys.pkceVerifier);\r\n\r\n    if (!expectedState || expectedState !== returnedState || !verifier) {\r\n      throw new Error(\"Invalid auth callback (state/verifier mismatch)\");\r\n    }\r\n\r\n    const tokens = await exchangeCodeForTokens(cfg, code, verifier);\r\n    saveTokens(storage, tokens);\r\n\r\n    const user = await fetchUserInfo(cfg, tokens.accessToken);\r\n    storage.setItem(Keys.user, JSON.stringify(user));\r\n\r\n    // Resolve the original pre-login path, falling back to \"/\"\r\n    const appRedirect = storage.getItem(Keys.appRedirect) ?? \"/\";\r\n    storage.removeItem(Keys.appRedirect);\r\n\r\n    if ((cfg.postLoginNavigation ?? \"replace\") === \"replace\") {\r\n      // Use a real navigation so routers on callback routes (e.g. /auth/callback)\r\n      // immediately transition without requiring a manual page refresh.\r\n      window.location.replace(appRedirect);\r\n    } else {\r\n      // Keep a soft URL update for apps that prefer to avoid a full navigation.\r\n      window.history.replaceState({}, document.title, appRedirect);\r\n    }\r\n\r\n    setState({ isLoading: false, isAuthenticated: true, tokens, user });\r\n    return true;\r\n  }, [cfg, storage]);\r\n\r\n  const boot = useCallback(async () => {\r\n    try {\r\n      // If this is a callback, complete it first\r\n      const handled = await finalizeFromCallback();\r\n      if (handled) return;\r\n\r\n      const tokens = loadTokens(storage);\r\n      if (!tokens) {\r\n        setState({ isLoading: false, isAuthenticated: false });\r\n        return;\r\n      }\r\n      if (tokens && cfg.useRefreshToken && tokens.refreshToken && shouldRefresh(tokens)) {\r\n        const next = await refreshIfNeeded();\r\n        if (!next) { setState({ isLoading: false, isAuthenticated: false }); return; }\r\n        setState((s) => ({ ...s, isLoading: false, isAuthenticated: true, tokens: next }));\r\n        return;\r\n      }\r\n\r\n      // NOTE: refresh token flow omitted here for brevity; see below notes.\r\n      if (isExpired(tokens, cfg.clockSkewSeconds ?? 60)) {\r\n        clearAuth(storage);\r\n        setState({ isLoading: false, isAuthenticated: false });\r\n        return;\r\n      }\r\n\r\n      const rawUser = storage.getItem(Keys.user);\r\n      const user = rawUser ? (JSON.parse(rawUser) as Record<string, any>) : undefined;\r\n\r\n      setState({ isLoading: false, isAuthenticated: true, tokens, user });\r\n    } catch (e: any) {\r\n      clearAuth(storage);\r\n      setState({ isLoading: false, isAuthenticated: false, error: e?.message ?? \"Auth error\" });\r\n    }\r\n  }, [cfg.clockSkewSeconds, finalizeFromCallback, storage]);\r\n\r\n  useEffect(() => { void boot(); }, [boot]);\r\n\r\n  const login = useCallback(async (opts?: { redirectTo?: string }) => {\r\n    const appRedirect = opts?.redirectTo ?? cfg.defaultAppRedirect ?? window.location.pathname;\r\n\r\n    const built = await buildAuthorizeUrl(cfg, { appState: appRedirect });\r\n    storage.setItem(Keys.pkceVerifier, built.verifier);\r\n    storage.setItem(Keys.state, built.state);\r\n    storage.setItem(Keys.nonce, built.nonce);\r\n    storage.setItem(Keys.appRedirect, appRedirect);\r\n\r\n    window.location.assign(built.url);\r\n  }, [cfg, storage]);\r\n\r\n  const logout = useCallback(async () => {\r\n    clearAuth(storage);\r\n    setState({ isLoading: false, isAuthenticated: false });\r\n\r\n    // Optional end-session redirect\r\n    if (cfg.endSessionEndpoint) {\r\n      const url = new URL(cfg.endSessionEndpoint);\r\n      if (cfg.postLogoutRedirectUri) url.searchParams.set(\"post_logout_redirect_uri\", cfg.postLogoutRedirectUri);\r\n      window.location.assign(url.toString());\r\n    } else if (cfg.postLogoutRedirectUri) {\r\n      window.location.assign(cfg.postLogoutRedirectUri);\r\n    }\r\n  }, [cfg.endSessionEndpoint, cfg.postLogoutRedirectUri, storage]);\r\n\r\n  const shouldRefresh = (tokens: TokenSet) => {\r\n  const now = Math.floor(Date.now() / 1000);\r\n  const leeway = cfg.refreshLeewaySeconds ?? 90;\r\n  return tokens.expiresAt - leeway <= now;\r\n};\r\n\r\nconst refreshIfNeeded = useCallback(async () => {\r\n  const tokens = loadTokens(storage);\r\n  if (!tokens) return undefined;\r\n\r\n  if (!cfg.useRefreshToken) return tokens;\r\n  if (!tokens.refreshToken) return tokens;\r\n\r\n  if (!shouldRefresh(tokens)) return tokens;\r\n\r\n  // cross-tab lock\r\n  const lockKey = cfg.refreshLockKey ?? \"ra_refresh_lock\";\r\n  const ttl = cfg.refreshLockTtlMs ?? 15000;\r\n\r\n  if (!tryAcquireLock(storage, lockKey, ttl)) {\r\n    // someone else is refreshing â€” wait and then re-load\r\n    await waitForUnlock(storage, lockKey, 6000);\r\n    return loadTokens(storage);\r\n  }\r\n\r\n  try {\r\n    const next = await refreshTokens(cfg, tokens.refreshToken);\r\n    saveTokens(storage, next);\r\n    setState((s) => ({ ...s, isAuthenticated: true, tokens: next }));\r\n\r\n    // refresh userinfo optionally (you can keep as-is if not needed)\r\n    // const user = await fetchUserInfo(cfg, next.accessToken);\r\n    // storage.setItem(Keys.user, JSON.stringify(user));\r\n    // setState((s) => ({ ...s, user }));\r\n\r\n    return next;\r\n  } finally {\r\n    releaseLock(storage, lockKey);\r\n  }\r\n}, [cfg, storage]);\r\n\r\nconst getAccessToken = useCallback(async () => {\r\n  const tokens = await refreshIfNeeded();\r\n  return tokens?.accessToken;\r\n}, [refreshIfNeeded]);\r\n\r\n  const value = useMemo(() => ({\r\n    ...state,\r\n    config: cfg,\r\n    login,\r\n    logout,\r\n    getAccessToken,\r\n  }), [cfg, login, logout, state, getAccessToken]);\r\n\r\n  return <AuthContext.Provider value={value}>{props.children}</AuthContext.Provider>;\r\n}\r\n","// src/react/useAuth.ts\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"./AuthContext\";\r\n\r\nexport function useAuth() {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) throw new Error(\"useAuth must be used within <AuthProvider />\");\r\n  return ctx;\r\n}\r\n","// src/react/RequireAuth.tsx\r\nimport React, { useEffect } from \"react\";\r\nimport { useAuth } from \"./useAuth\";\r\n\r\nexport function RequireAuth(props: { children: React.ReactNode; redirectTo?: string }) {\r\n  const auth = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (!auth.isLoading && !auth.isAuthenticated) {\r\n      void auth.login({ redirectTo: props.redirectTo ?? window.location.pathname });\r\n    }\r\n  }, [auth, props.redirectTo]);\r\n\r\n  if (auth.isLoading) return null;\r\n  if (!auth.isAuthenticated) return null;\r\n\r\n  return <>{props.children}</>;\r\n}\r\n","// src/react/authFetch.ts\r\nimport type { AuthApi } from \"./AuthContext\";\r\n\r\nexport async function authFetch(auth: Pick<AuthApi, \"getAccessToken\" | \"logout\">, input: RequestInfo | URL, init?: RequestInit) {\r\n  const token = await auth.getAccessToken();\r\n\r\n  const headers = new Headers(init?.headers ?? {});\r\n  if (token) headers.set(\"Authorization\", `Bearer ${token}`);\r\n  headers.set(\"Accept\", headers.get(\"Accept\") ?? \"application/json\");\r\n\r\n  const res = await fetch(input, { ...init, headers });\r\n\r\n  // If API says unauthorized, you can choose to logout or just bubble up.\r\n  if (res.status === 401) {\r\n    // optional: await auth.logout();\r\n  }\r\n\r\n  return res;\r\n}\r\n"],"names":["createContext","useMemo","useState","useCallback","useEffect","useContext"],"mappings":"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"}